{% extends "dashboard/base_dashboard.html" %}

{% block title %}Biblioth√®que de Prompts - WeBox Multi-IA{% endblock %}

{% block extra_css %}
<style>
.prompt-template-card:hover {
    background: rgba(255,255,255,0.2) !important;
    transform: translateY(-3px) !important;
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
}

.category-card:hover {
    background: #e9ecef !important;
    transform: translateY(-3px) !important;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1) !important;
}
</style>
{% endblock %}

{% block content %}
<!-- Page Header -->
<div class="page-header">
    <h1>üìö Biblioth√®que de Prompts</h1>
    <p>G√©rez et organisez vos prompts pour une utilisation optimale avec les IA</p>
</div>

<!-- Actions Bar -->
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; gap: 1rem;">
    <div style="display: flex; gap: 1rem; flex: 1;">
        <input 
            type="text" 
            id="searchInput" 
            placeholder="üîç Rechercher un prompt..."
            style="flex: 1; padding: 0.75rem; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem;"
        >
        <select 
            id="categoryFilter"
            style="padding: 0.75rem; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; min-width: 150px;"
        >
            <option value="">Toutes les cat√©gories</option>
        </select>
        <button 
            id="favoritesFilter"
            style="padding: 0.75rem 1.5rem; border: 1px solid #ddd; border-radius: 8px; background: white; cursor: pointer; font-size: 1rem;"
        >
            ‚≠ê Favoris
        </button>
    </div>
    <button 
        id="newPromptBtn"
        style="padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 1rem;"
    >
        ‚ûï Nouveau Prompt
    </button>
</div>

<!-- Prompts Grid -->
<div id="promptsGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 1.5rem;">
    <div style="grid-column: 1 / -1; text-align: center; padding: 3rem; color: #888;">
        Chargement des prompts...
    </div>
</div>

<!-- Prompts pr√©d√©finis populaires -->
<div class="dashboard-card" style="margin-top: 2rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
    <h2 style="margin-bottom: 1.5rem;">üî• Prompts Populaires Pr√©d√©finis</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem;">
        <div class="prompt-template-card" data-prompt="R√©dige un article de blog de 1000 mots sur [SUJET]. Structure : intro accrocheuse, 3 parties avec sous-titres, conclusion avec CTA. Ton professionnel mais accessible." style="background: rgba(255,255,255,0.1); padding: 1.5rem; border-radius: 10px; cursor: pointer; transition: all 0.3s ease;">
            <strong style="font-size: 1.1rem;">üìù R√©daction d'Article</strong>
            <p style="opacity: 0.9; margin-top: 0.5rem; font-size: 0.9rem;">
                "R√©dige un article de blog de 1000 mots sur [SUJET]. Structure : intro accrocheuse, 3 parties avec sous-titres, conclusion avec CTA. Ton professionnel mais accessible."
            </p>
        </div>
        <div class="prompt-template-card" data-prompt="Cr√©e un email de vente pour [PRODUIT/SERVICE]. Cible : [AUDIENCE]. Objectif : conversion. Inclus : sujet accrocheur, probl√®me, solution, b√©n√©fices, CTA clair." style="background: rgba(255,255,255,0.1); padding: 1.5rem; border-radius: 10px; cursor: pointer; transition: all 0.3s ease;">
            <strong style="font-size: 1.1rem;">üìß Email Marketing</strong>
            <p style="opacity: 0.9; margin-top: 0.5rem; font-size: 0.9rem;">
                "Cr√©e un email de vente pour [PRODUIT/SERVICE]. Cible : [AUDIENCE]. Objectif : conversion. Inclus : sujet accrocheur, probl√®me, solution, b√©n√©fices, CTA clair."
            </p>
        </div>
        <div class="prompt-template-card" data-prompt="G√©n√®re 5 posts LinkedIn sur [TH√àME]. Format : hook + contenu de valeur + question d'engagement. Ton : expert mais accessible. Max 150 mots par post." style="background: rgba(255,255,255,0.1); padding: 1.5rem; border-radius: 10px; cursor: pointer; transition: all 0.3s ease;">
            <strong style="font-size: 1.1rem;">üì± Post R√©seaux Sociaux</strong>
            <p style="opacity: 0.9; margin-top: 0.5rem; font-size: 0.9rem;">
                "G√©n√®re 5 posts LinkedIn sur [TH√àME]. Format : hook + contenu de valeur + question d'engagement. Ton : expert mais accessible. Max 150 mots par post."
            </p>
        </div>
        <div class="prompt-template-card" data-prompt="Cr√©e un pitch de vente de 2 minutes pour [PRODUIT]. Structure : probl√®me client, solution unique, preuves sociales, proposition de valeur, CTA." style="background: rgba(255,255,255,0.1); padding: 1.5rem; border-radius: 10px; cursor: pointer; transition: all 0.3s ease;">
            <strong style="font-size: 1.1rem;">üíº Pitch Commercial</strong>
            <p style="opacity: 0.9; margin-top: 0.5rem; font-size: 0.9rem;">
                "Cr√©e un pitch de vente de 2 minutes pour [PRODUIT]. Structure : probl√®me client, solution unique, preuves sociales, proposition de valeur, CTA."
            </p>
        </div>
    </div>
</div>

<!-- Cat√©gories de prompts -->
<div class="dashboard-card" style="margin-top: 2rem;">
    <h2 style="margin-bottom: 1.5rem;">üìÇ Cat√©gories Recommand√©es</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
        <div class="category-card" data-category="R√©daction" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; text-align: center; cursor: pointer; transition: all 0.3s ease;">
            <div style="font-size: 2rem; margin-bottom: 0.5rem;">üìù</div>
            <strong>R√©daction</strong>
            <p style="color: #666; font-size: 0.85rem; margin-top: 0.5rem;">Articles, blogs, copies</p>
        </div>
        <div class="category-card" data-category="Marketing" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; text-align: center; cursor: pointer; transition: all 0.3s ease;">
            <div style="font-size: 2rem; margin-bottom: 0.5rem;">üì¢</div>
            <strong>Marketing</strong>
            <p style="color: #666; font-size: 0.85rem; margin-top: 0.5rem;">Campagnes, publicit√©s, SEO</p>
        </div>
        <div class="category-card" data-category="D√©veloppement" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; text-align: center; cursor: pointer; transition: all 0.3s ease;">
            <div style="font-size: 2rem; margin-bottom: 0.5rem;">üíª</div>
            <strong>D√©veloppement</strong>
            <p style="color: #666; font-size: 0.85rem; margin-top: 0.5rem;">Code, debug, architecture</p>
        </div>
        <div class="category-card" data-category="Cr√©atif" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; text-align: center; cursor: pointer; transition: all 0.3s ease;">
            <div style="font-size: 2rem; margin-bottom: 0.5rem;">üé®</div>
            <strong>Cr√©atif</strong>
            <p style="color: #666; font-size: 0.85rem; margin-top: 0.5rem;">Design, images, vid√©os</p>
        </div>
        <div class="category-card" data-category="Business" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; text-align: center; cursor: pointer; transition: all 0.3s ease;">
            <div style="font-size: 2rem; margin-bottom: 0.5rem;">üíº</div>
            <strong>Business</strong>
            <p style="color: #666; font-size: 0.85rem; margin-top: 0.5rem;">Strat√©gie, finance, RH</p>
        </div>
        <div class="category-card" data-category="√âducation" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; text-align: center; cursor: pointer; transition: all 0.3s ease;">
            <div style="font-size: 2rem; margin-bottom: 0.5rem;">üìö</div>
            <strong>√âducation</strong>
            <p style="color: #666; font-size: 0.85rem; margin-top: 0.5rem;">Cours, tutoriels, formations</p>
        </div>
    </div>
</div>

<!-- Conseils pour cr√©er de bons prompts -->
<div class="dashboard-card" style="margin-top: 2rem; background: #fff3cd;">
    <h2 style="margin-bottom: 1.5rem;">üí° Conseils pour Cr√©er de Bons Prompts</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
        <div>
            <h3 style="color: #1a1a2e; margin-bottom: 0.5rem;">1. Soyez Sp√©cifique</h3>
            <p style="color: #666;">Plus votre prompt est d√©taill√©, meilleure sera la r√©ponse. Incluez le contexte, le ton, la longueur souhait√©e.</p>
            <div style="background: white; padding: 0.75rem; border-radius: 6px; margin-top: 0.5rem; font-size: 0.85rem;">
                <strong>‚ùå Mauvais :</strong> "√âcris un article"<br>
                <strong>‚úÖ Bon :</strong> "√âcris un article de 800 mots sur le marketing digital pour d√©butants, ton p√©dagogique"
            </div>
        </div>
        <div>
            <h3 style="color: #1a1a2e; margin-bottom: 0.5rem;">2. D√©finissez le R√¥le</h3>
            <p style="color: #666;">Demandez √† l'IA d'adopter un r√¥le sp√©cifique pour des r√©ponses plus pertinentes.</p>
            <div style="background: white; padding: 0.75rem; border-radius: 6px; margin-top: 0.5rem; font-size: 0.85rem;">
                <strong>Exemple :</strong> "Tu es un expert en SEO avec 10 ans d'exp√©rience. Analyse ce site web..."
            </div>
        </div>
        <div>
            <h3 style="color: #1a1a2e; margin-bottom: 0.5rem;">3. Structurez la R√©ponse</h3>
            <p style="color: #666;">Indiquez la structure souhait√©e pour obtenir des r√©ponses organis√©es.</p>
            <div style="background: white; padding: 0.75rem; border-radius: 6px; margin-top: 0.5rem; font-size: 0.85rem;">
                <strong>Exemple :</strong> "R√©ponds en 3 parties : 1) Probl√®me 2) Solution 3) B√©n√©fices"
            </div>
        </div>
        <div>
            <h3 style="color: #1a1a2e; margin-bottom: 0.5rem;">4. Utilisez des Variables</h3>
            <p style="color: #666;">Cr√©ez des prompts r√©utilisables avec des variables entre crochets.</p>
            <div style="background: white; padding: 0.75rem; border-radius: 6px; margin-top: 0.5rem; font-size: 0.85rem;">
                <strong>Exemple :</strong> "Cr√©e une pub pour [PRODUIT] ciblant [AUDIENCE] avec [B√âN√âFICE]"
            </div>
        </div>
    </div>
</div>

<!-- Statistiques -->
<div class="dashboard-card" style="margin-top: 2rem;">
    <h2 style="margin-bottom: 1.5rem;">üìä Pourquoi Utiliser une Biblioth√®que de Prompts ?</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem;">
        <div style="text-align: center;">
            <div style="font-size: 3rem; font-weight: bold; color: #4169e1;">70%</div>
            <div style="color: #666;">Gain de temps sur la r√©daction</div>
        </div>
        <div style="text-align: center;">
            <div style="font-size: 3rem; font-weight: bold; color: #28a745;">3x</div>
            <div style="color: #666;">Meilleure qualit√© des r√©sultats</div>
        </div>
        <div style="text-align: center;">
            <div style="font-size: 3rem; font-weight: bold; color: #ffc107;">100+</div>
            <div style="color: #666;">Prompts r√©utilisables</div>
        </div>
        <div style="text-align: center;">
            <div style="font-size: 3rem; font-weight: bold; color: #dc3545;">0‚Ç¨</div>
            <div style="color: #666;">Gratuit et illimit√©</div>
        </div>
    </div>
</div>

<!-- Modal Nouveau/√âditer Prompt -->
<div id="promptModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
    <div style="background: white; border-radius: 12px; padding: 2rem; max-width: 600px; width: 90%; max-height: 90vh; overflow-y: auto;">
        <h2 id="modalTitle" style="margin-bottom: 1.5rem;">Nouveau Prompt</h2>
        
        <form id="promptForm">
            <div style="margin-bottom: 1rem;">
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Titre</label>
                <input 
                    type="text" 
                    id="promptTitle" 
                    required
                    style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem;"
                >
            </div>
            
            <div style="margin-bottom: 1rem;">
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Contenu du Prompt</label>
                <textarea 
                    id="promptContent" 
                    required
                    rows="8"
                    style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; resize: vertical;"
                ></textarea>
            </div>
            
            <div style="margin-bottom: 1rem;">
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Cat√©gorie</label>
                <input 
                    type="text" 
                    id="promptCategory" 
                    value="G√©n√©ral"
                    style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem;"
                >
            </div>
            
            <div style="margin-bottom: 1rem;">
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Tags (s√©par√©s par des virgules)</label>
                <input 
                    type="text" 
                    id="promptTags" 
                    placeholder="exemple, test, important"
                    style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem;"
                >
            </div>
            
            <div style="margin-bottom: 1.5rem; display: flex; gap: 1rem;">
                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                    <input type="checkbox" id="promptFavorite">
                    <span>‚≠ê Favori</span>
                </label>
                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                    <input type="checkbox" id="promptPublic">
                    <span>üåê Public</span>
                </label>
            </div>
            
            <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                <button 
                    type="button" 
                    id="cancelBtn"
                    style="padding: 0.75rem 1.5rem; border: 1px solid #ddd; border-radius: 8px; background: white; cursor: pointer;"
                >
                    Annuler
                </button>
                <button 
                    type="submit"
                    style="padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;"
                >
                    Enregistrer
                </button>
            </div>
        </form>
    </div>
</div>

<script>
let prompts = [];
let currentPromptId = null;
let currentFilters = { category: '', search: '', favorites: false };

// Charger les prompts
async function loadPrompts() {
    try {
        const params = new URLSearchParams();
        if (currentFilters.category) params.append('category', currentFilters.category);
        if (currentFilters.search) params.append('search', currentFilters.search);
        if (currentFilters.favorites) params.append('is_favorite', 'true');
        
        const response = await fetch(`/api/prompts/?${params}`);
        if (!response.ok) throw new Error('Erreur de chargement');
        
        prompts = await response.json();
        displayPrompts();
        loadCategories();
    } catch (error) {
        console.error('Erreur:', error);
        document.getElementById('promptsGrid').innerHTML = `
            <div style="grid-column: 1 / -1; text-align: center; padding: 3rem; color: #dc3545;">
                ‚ùå Erreur lors du chargement des prompts
            </div>
        `;
    }
}

// Afficher les prompts
function displayPrompts() {
    const grid = document.getElementById('promptsGrid');
    
    if (prompts.length === 0) {
        grid.innerHTML = `
            <div style="grid-column: 1 / -1; text-align: center; padding: 3rem; color: #888;">
                üìö Aucun prompt trouv√©. Cr√©ez votre premier prompt !
            </div>
        `;
        return;
    }
    
    grid.innerHTML = prompts.map(prompt => `
        <div class="dashboard-card" style="position: relative;">
            ${prompt.is_favorite ? '<div style="position: absolute; top: 1rem; right: 1rem; font-size: 1.5rem;">‚≠ê</div>' : ''}
            <h3 style="margin-bottom: 0.5rem;">${escapeHtml(prompt.title)}</h3>
            <div style="color: #666; font-size: 0.9rem; margin-bottom: 1rem;">
                üìÅ ${escapeHtml(prompt.category)} ‚Ä¢ üî¢ ${prompt.usage_count} utilisations
            </div>
            <p style="color: #444; margin-bottom: 1rem; max-height: 100px; overflow: hidden;">
                ${escapeHtml(prompt.content.substring(0, 150))}${prompt.content.length > 150 ? '...' : ''}
            </p>
            ${prompt.tags.length > 0 ? `
                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1rem;">
                    ${prompt.tags.map(tag => `
                        <span style="padding: 0.25rem 0.75rem; background: #f0f0f0; border-radius: 12px; font-size: 0.85rem;">
                            ${escapeHtml(tag)}
                        </span>
                    `).join('')}
                </div>
            ` : ''}
            <div style="display: flex; gap: 0.5rem; margin-top: auto;">
                <button onclick="usePrompt(${prompt.id})" style="flex: 1; padding: 0.5rem; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer;">
                    ‚ú® Utiliser
                </button>
                <button onclick="editPrompt(${prompt.id})" style="padding: 0.5rem 1rem; background: #f8f9fa; border: 1px solid #ddd; border-radius: 6px; cursor: pointer;">
                    ‚úèÔ∏è
                </button>
                <button onclick="deletePrompt(${prompt.id})" style="padding: 0.5rem 1rem; background: #f8f9fa; border: 1px solid #ddd; border-radius: 6px; cursor: pointer; color: #dc3545;">
                    üóëÔ∏è
                </button>
            </div>
        </div>
    `).join('');
}

// Charger les cat√©gories
async function loadCategories() {
    try {
        const response = await fetch('/api/prompts/categories');
        const categories = await response.json();
        
        const select = document.getElementById('categoryFilter');
        const currentValue = select.value;
        
        select.innerHTML = '<option value="">Toutes les cat√©gories</option>' +
            categories.map(cat => `<option value="${escapeHtml(cat)}">${escapeHtml(cat)}</option>`).join('');
        
        select.value = currentValue;
    } catch (error) {
        console.error('Erreur chargement cat√©gories:', error);
    }
}

// Utiliser un prompt
async function usePrompt(id) {
    const prompt = prompts.find(p => p.id === id);
    if (!prompt) return;
    
    // Copier dans le presse-papiers
    navigator.clipboard.writeText(prompt.content);
    
    // Incr√©menter le compteur
    await fetch(`/api/prompts/${id}/use`, { method: 'POST' });
    
    alert('‚úÖ Prompt copi√© dans le presse-papiers !');
    loadPrompts();
}

// √âditer un prompt
function editPrompt(id) {
    const prompt = prompts.find(p => p.id === id);
    if (!prompt) return;
    
    currentPromptId = id;
    document.getElementById('modalTitle').textContent = '√âditer le Prompt';
    document.getElementById('promptTitle').value = prompt.title;
    document.getElementById('promptContent').value = prompt.content;
    document.getElementById('promptCategory').value = prompt.category;
    document.getElementById('promptTags').value = prompt.tags.join(', ');
    document.getElementById('promptFavorite').checked = prompt.is_favorite;
    document.getElementById('promptPublic').checked = prompt.is_public;
    
    document.getElementById('promptModal').style.display = 'flex';
}

// Supprimer un prompt
async function deletePrompt(id) {
    if (!confirm('√ätes-vous s√ªr de vouloir supprimer ce prompt ?')) return;
    
    try {
        const response = await fetch(`/api/prompts/${id}`, { method: 'DELETE' });
        if (!response.ok) throw new Error('Erreur de suppression');
        
        alert('‚úÖ Prompt supprim√© !');
        loadPrompts();
    } catch (error) {
        console.error('Erreur:', error);
        alert('‚ùå Erreur lors de la suppression');
    }
}

// √âchapper HTML
function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
}

// Attendre que le DOM soit charg√©
document.addEventListener('DOMContentLoaded', function() {
    // Event listeners
    document.getElementById('newPromptBtn').addEventListener('click', () => {
        currentPromptId = null;
        document.getElementById('modalTitle').textContent = 'Nouveau Prompt';
        document.getElementById('promptForm').reset();
        document.getElementById('promptModal').style.display = 'flex';
    });

    document.getElementById('cancelBtn').addEventListener('click', () => {
        document.getElementById('promptModal').style.display = 'none';
    });

    document.getElementById('promptForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const data = {
        title: document.getElementById('promptTitle').value,
        content: document.getElementById('promptContent').value,
        category: document.getElementById('promptCategory').value,
        tags: document.getElementById('promptTags').value.split(',').map(t => t.trim()).filter(t => t),
        is_favorite: document.getElementById('promptFavorite').checked,
        is_public: document.getElementById('promptPublic').checked
    };
    
    try {
        const url = currentPromptId ? `/api/prompts/${currentPromptId}` : '/api/prompts/';
        const method = currentPromptId ? 'PUT' : 'POST';
        
        const response = await fetch(url, {
            method,
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
        });
        
        if (!response.ok) throw new Error('Erreur de sauvegarde');
        
        document.getElementById('promptModal').style.display = 'none';
        alert('‚úÖ Prompt enregistr√© !');
        loadPrompts();
    } catch (error) {
        console.error('Erreur:', error);
        alert('‚ùå Erreur lors de la sauvegarde');
        }
    });

    document.getElementById('searchInput').addEventListener('input', (e) => {
        currentFilters.search = e.target.value;
        loadPrompts();
    });

    document.getElementById('categoryFilter').addEventListener('change', (e) => {
        currentFilters.category = e.target.value;
        loadPrompts();
    });

    document.getElementById('favoritesFilter').addEventListener('click', () => {
        currentFilters.favorites = !currentFilters.favorites;
        document.getElementById('favoritesFilter').style.background = currentFilters.favorites ? '#ffd700' : 'white';
        loadPrompts();
    });

    // Gestion des clics sur les prompts pr√©d√©finis
    document.querySelectorAll('.prompt-template-card').forEach(card => {
        card.addEventListener('click', function() {
            const promptText = this.dataset.prompt;
            const title = this.querySelector('strong').textContent;
            
            // Pr√©-remplir le modal avec le prompt
            currentPromptId = null;
            document.getElementById('modalTitle').textContent = 'Nouveau Prompt';
            document.getElementById('promptTitle').value = title;
            document.getElementById('promptContent').value = promptText;
            document.getElementById('promptCategory').value = '';
            document.getElementById('promptTags').value = '';
            document.getElementById('promptFavorite').checked = false;
            document.getElementById('promptPublic').checked = true;
            document.getElementById('promptModal').style.display = 'flex';
        });
        
        // Effet hover
        card.addEventListener('mouseenter', function() {
            this.style.background = 'rgba(255,255,255,0.2)';
            this.style.transform = 'translateY(-3px)';
        });
        card.addEventListener('mouseleave', function() {
            this.style.background = 'rgba(255,255,255,0.1)';
            this.style.transform = 'translateY(0)';
        });
    });

    // Gestion des clics sur les cat√©gories
    document.querySelectorAll('.category-card').forEach(card => {
        card.addEventListener('click', function() {
            const category = this.dataset.category;
            
            // Filtrer par cat√©gorie
            document.getElementById('categoryFilter').value = category;
            currentFilters.category = category;
            loadPrompts();
            
            // Scroll vers la grille de prompts
            document.getElementById('promptsGrid').scrollIntoView({ behavior: 'smooth' });
        });
        
        // Effet hover
        card.addEventListener('mouseenter', function() {
            this.style.background = '#e9ecef';
            this.style.transform = 'translateY(-3px)';
            this.style.boxShadow = '0 4px 12px rgba(0,0,0,0.1)';
        });
        card.addEventListener('mouseleave', function() {
            this.style.background = '#f8f9fa';
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = 'none';
        });
    });

    // Charger au d√©marrage
    loadPrompts();});
</script>
{% endblock %}
