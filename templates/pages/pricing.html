{% extends "dashboard/base_dashboard.html" %}

{% block title %}Abonnements - WeBox{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="/static/css/pricing.css">
{% endblock %}

{% block content %}
<div class="page-header">
    <h1>üíé Abonnements WeBox</h1>
    <p>Choisissez le plan qui correspond √† vos besoins</p>
</div>

<div class="pricing-page">
    <!-- Toggle annuel/mensuel -->
    <div class="billing-toggle">
        <span class="toggle-label">Mensuel</span>
        <label class="switch">
            <input type="checkbox" id="billingToggle" onchange="toggleBilling()">
            <span class="slider"></span>
        </label>
        <span class="toggle-label">Annuel <span class="save-badge">√âconomisez 20%</span></span>
    </div>

    <!-- Grille des plans -->
    <div class="plans-grid">
        <!-- Plan Gratuit -->
        <div class="plan-card">
            <div class="plan-header">
                <div class="plan-icon">üÜì</div>
                <h3 class="plan-name">Gratuit</h3>
                <div class="plan-price">
                    <span class="price" data-monthly="0" data-yearly="0">0 ‚Ç¨</span>
                    <span class="period">/mois</span>
                </div>
                <p class="plan-description">Parfait pour d√©couvrir WeBox</p>
            </div>

            <div class="plan-features">
                <h4>Fonctionnalit√©s incluses :</h4>
                <ul>
                    <li><span class="icon">‚úì</span> 500 cr√©dits IA/mois</li>
                    <li><span class="icon">‚úì</span> 5 GB de stockage</li>
                    <li><span class="icon">‚úì</span> Outils IA de base</li>
                    <li><span class="icon">‚úì</span> Support communautaire</li>
                    <li><span class="icon">‚úì</span> 3 projets actifs</li>
                    <li><span class="icon">‚úó</span> API access</li>
                    <li><span class="icon">‚úó</span> Collaboration</li>
                    <li><span class="icon">‚úó</span> Support prioritaire</li>
                </ul>
            </div>

            <button class="btn-select" onclick="selectPlan('free')">
                Commencer gratuitement
            </button>
        </div>

        <!-- Plan Pro -->
        <div class="plan-card recommended">
            <div class="recommended-badge">‚≠ê RECOMMAND√â</div>
            <div class="plan-header">
                <div class="plan-icon">‚ö°</div>
                <h3 class="plan-name">Pro</h3>
                <div class="plan-price">
                    <span class="price" data-monthly="29.99" data-yearly="23.99">29,99 ‚Ç¨</span>
                    <span class="period">/mois</span>
                </div>
                <p class="plan-description">Id√©al pour les professionnels</p>
            </div>

            <div class="plan-features">
                <h4>Tout du plan Gratuit, plus :</h4>
                <ul>
                    <li><span class="icon">‚úì</span> 10,000 cr√©dits IA/mois</li>
                    <li><span class="icon">‚úì</span> 100 GB de stockage</li>
                    <li><span class="icon">‚úì</span> Tous les outils IA</li>
                    <li><span class="icon">‚úì</span> Support prioritaire 24/7</li>
                    <li><span class="icon">‚úì</span> Projets illimit√©s</li>
                    <li><span class="icon">‚úì</span> API access (10k req/mois)</li>
                    <li><span class="icon">‚úì</span> Collaboration (5 membres)</li>
                    <li><span class="icon">‚úì</span> Exports HD</li>
                </ul>
            </div>

            <button class="btn-select primary" onclick="selectPlan('pro')">
                Choisir Pro
            </button>
        </div>

        <!-- Plan Enterprise -->
        <div class="plan-card">
            <div class="plan-header">
                <div class="plan-icon">üè¢</div>
                <h3 class="plan-name">Enterprise</h3>
                <div class="plan-price">
                    <span class="price" data-monthly="99.99" data-yearly="79.99">99,99 ‚Ç¨</span>
                    <span class="period">/mois</span>
                </div>
                <p class="plan-description">Pour les √©quipes et entreprises</p>
            </div>

            <div class="plan-features">
                <h4>Tout du plan Pro, plus :</h4>
                <ul>
                    <li><span class="icon">‚úì</span> Cr√©dits IA illimit√©s</li>
                    <li><span class="icon">‚úì</span> 1 TB de stockage</li>
                    <li><span class="icon">‚úì</span> Support d√©di√© 24/7</li>
                    <li><span class="icon">‚úì</span> Collaboration illimit√©e</li>
                    <li><span class="icon">‚úì</span> API illimit√©e</li>
                    <li><span class="icon">‚úì</span> SLA garanti 99.9%</li>
                    <li><span class="icon">‚úì</span> Formation personnalis√©e</li>
                    <li><span class="icon">‚úì</span> Int√©grations sur mesure</li>
                </ul>
            </div>

            <button class="btn-select" onclick="selectPlan('enterprise')">
                Choisir Enterprise
            </button>
        </div>
    </div>

    <!-- Comparaison d√©taill√©e -->
    <div class="comparison-section">
        <h2>Comparaison d√©taill√©e des plans</h2>
        
        <div class="comparison-table-wrapper">
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Fonctionnalit√©s</th>
                        <th>Gratuit</th>
                        <th class="highlighted">Pro</th>
                        <th>Enterprise</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="feature-name">Cr√©dits IA mensuels</td>
                        <td>500</td>
                        <td class="highlighted">10,000</td>
                        <td>Illimit√©</td>
                    </tr>
                    <tr>
                        <td class="feature-name">Stockage cloud</td>
                        <td>5 GB</td>
                        <td class="highlighted">100 GB</td>
                        <td>1 TB</td>
                    </tr>
                    <tr>
                        <td class="feature-name">Projets actifs</td>
                        <td>3</td>
                        <td class="highlighted">Illimit√©</td>
                        <td>Illimit√©</td>
                    </tr>
                    <tr>
                        <td class="feature-name">Membres d'√©quipe</td>
                        <td>1</td>
                        <td class="highlighted">5</td>
                        <td>Illimit√©</td>
                    </tr>
                    <tr>
                        <td class="feature-name">API requests/mois</td>
                        <td>-</td>
                        <td class="highlighted">10,000</td>
                        <td>Illimit√©</td>
                    </tr>
                    <tr>
                        <td class="feature-name">Support</td>
                        <td>Communautaire</td>
                        <td class="highlighted">Prioritaire 24/7</td>
                        <td>D√©di√© 24/7</td>
                    </tr>
                    <tr>
                        <td class="feature-name">SLA</td>
                        <td>-</td>
                        <td class="highlighted">99%</td>
                        <td>99.9%</td>
                    </tr>
                    <tr>
                        <td class="feature-name">Formation</td>
                        <td>Documentation</td>
                        <td class="highlighted">Webinaires</td>
                        <td>Personnalis√©e</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- FAQ -->
    <div class="faq-section">
        <h2>Questions fr√©quentes</h2>
        
        <div class="faq-grid">
            <div class="faq-item">
                <h3>üí≥ Quels moyens de paiement acceptez-vous ?</h3>
                <p>Nous acceptons les cartes bancaires (Visa, Mastercard, Amex), PayPal, et les virements bancaires pour les plans Enterprise.</p>
            </div>

            <div class="faq-item">
                <h3>üîÑ Puis-je changer de plan √† tout moment ?</h3>
                <p>Oui, vous pouvez upgrader ou downgrader votre plan √† tout moment. Les changements sont effectifs imm√©diatement.</p>
            </div>

            <div class="faq-item">
                <h3>üí∞ Offrez-vous des remboursements ?</h3>
                <p>Oui, nous offrons une garantie satisfait ou rembours√© de 30 jours sur tous nos plans payants.</p>
            </div>

            <div class="faq-item">
                <h3>üìä Que se passe-t-il si je d√©passe mes cr√©dits ?</h3>
                <p>Vous pouvez acheter des cr√©dits suppl√©mentaires ou upgrader votre plan. Vos services ne seront pas interrompus.</p>
            </div>

            <div class="faq-item">
                <h3>üîí Mes donn√©es sont-elles s√©curis√©es ?</h3>
                <p>Absolument. Nous utilisons un chiffrement de niveau bancaire et respectons le RGPD. Vos donn√©es vous appartiennent.</p>
            </div>

            <div class="faq-item">
                <h3>üë• Comment fonctionne la collaboration ?</h3>
                <p>Invitez des membres √† vos projets, partagez des ressources, et collaborez en temps r√©el avec votre √©quipe.</p>
            </div>
        </div>
    </div>

    <!-- CTA final -->
    <div class="final-cta">
        <h2>Pr√™t √† booster votre productivit√© ?</h2>
        <p>Rejoignez plus de 10,000 professionnels qui utilisent WeBox</p>
        <div class="cta-buttons">
            <button class="btn-cta primary" onclick="selectPlan('pro')">
                Commencer avec Pro
            </button>
            <button class="btn-cta secondary" onclick="selectPlan('free')">
                Essayer gratuitement
            </button>
        </div>
    </div>
</div>

<script>
let isYearly = false;

function toggleBilling() {
    isYearly = document.getElementById('billingToggle').checked;
    
    document.querySelectorAll('.price').forEach(priceEl => {
        const monthly = parseFloat(priceEl.dataset.monthly);
        const yearly = parseFloat(priceEl.dataset.yearly);
        const price = isYearly ? yearly : monthly;
        
        if (price === 0) {
            priceEl.textContent = '0 ‚Ç¨';
        } else {
            priceEl.textContent = price.toFixed(2).replace('.', ',') + ' ‚Ç¨';
        }
    });
    
    document.querySelectorAll('.period').forEach(periodEl => {
        periodEl.textContent = isYearly ? '/mois (factur√© annuellement)' : '/mois';
    });
}

function selectPlan(plan) {
    const billing = isYearly ? 'yearly' : 'monthly';
    
    if (plan === 'free') {
        if (confirm('Voulez-vous cr√©er un compte gratuit ?')) {
            window.location.href = '/register?plan=free';
        }
    } else {
        window.location.href = `/checkout?plan=${plan}&billing=${billing}`;
    }
}

// Animation au scroll
document.addEventListener('DOMContentLoaded', function() {
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.animation = 'fadeInUp 0.6s ease forwards';
            }
        });
    }, { threshold: 0.1 });

    document.querySelectorAll('.plan-card, .faq-item').forEach(el => {
        observer.observe(el);
    });
});
</script>
{% endblock %}
